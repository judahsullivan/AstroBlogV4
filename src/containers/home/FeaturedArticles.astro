---
import ArticleCard from "@/components/ui/articleCard.astro";
import { Button } from "@/components/ui/button";
import SectionLayout from "@/layouts/SectionLayout.astro";
import { getCollection } from "astro:content";

const title = "Latest Articles";

const allPosts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const posts = allPosts.slice(0, 5);
---

<SectionLayout
  title={title}
  slotClass="flex flex-col gap-10"
  sectionClass="gap-12"
  mainSection={false}
>
  <div class="grid md:grid-cols-2 gap-6">
    {
      posts.map((article) => (
        <ArticleCard
          src={`${article.data.heroImage}`}
          title={article.data.title}
          description={article.data.description}
          date={article.data.pubDate}
        />
      ))
    }
  </div>
  <Button className="max-w-fit"> View All Articles </Button>
</SectionLayout>
